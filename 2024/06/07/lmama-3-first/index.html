<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ã€å¾®è°ƒå¤§æ¨¡å‹llamaã€‘ åŸºäºllama 3åˆ©ç”¨è‡ªå·±çš„æ•°æ®é›†å¾®è°ƒï¼ˆ1ï¼‰ | CARRY</title><meta name="author" content="CARRY"><meta name="copyright" content="CARRY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="Llama 3ä»‹ç»æœ¬æ¬¡Llama-3çš„ä»‹ç»ä¸å‰ä¸¤ä¸ªç‰ˆæœ¬å·®ä¸å¤šï¼Œå¤§é‡çš„æµ‹è¯•æ•°æ®å’Œæ ¼å¼åŒ–ä»‹ç»ã€‚ä½†Metaç‰¹æ„æåˆ°Llama-3ä½¿ç”¨äº†æ©ç å’Œåˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›è¿™ä¸¤é¡¹æŠ€æœ¯ã€‚ ç›®å‰ï¼Œå¤§æ¨¡å‹é¢†åŸŸæœ€æµè¡Œçš„Transformeræ¶æ„çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è‡ªæˆ‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºå¤„ç†åºåˆ—æ•°æ®çš„æŠ€æœ¯ï¼Œå¯å¯¹è¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒåŠ æƒèšåˆï¼Œä»¥æ•è·å…ƒç´ ä¹‹é—´çš„é‡è¦å…³ç³»ã€‚   æ–°çš„ 8B å’Œ 70B å‚æ•° Llama 3 æ¨¡å‹æ˜¯ Ll">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€å¾®è°ƒå¤§æ¨¡å‹llamaã€‘ åŸºäºllama 3åˆ©ç”¨è‡ªå·±çš„æ•°æ®é›†å¾®è°ƒï¼ˆ1ï¼‰">
<meta property="og:url" content="https://delahayecarry.github.io/2024/06/07/lmama-3-first/index.html">
<meta property="og:site_name" content="CARRY">
<meta property="og:description" content="Llama 3ä»‹ç»æœ¬æ¬¡Llama-3çš„ä»‹ç»ä¸å‰ä¸¤ä¸ªç‰ˆæœ¬å·®ä¸å¤šï¼Œå¤§é‡çš„æµ‹è¯•æ•°æ®å’Œæ ¼å¼åŒ–ä»‹ç»ã€‚ä½†Metaç‰¹æ„æåˆ°Llama-3ä½¿ç”¨äº†æ©ç å’Œåˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›è¿™ä¸¤é¡¹æŠ€æœ¯ã€‚ ç›®å‰ï¼Œå¤§æ¨¡å‹é¢†åŸŸæœ€æµè¡Œçš„Transformeræ¶æ„çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è‡ªæˆ‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºå¤„ç†åºåˆ—æ•°æ®çš„æŠ€æœ¯ï¼Œå¯å¯¹è¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒåŠ æƒèšåˆï¼Œä»¥æ•è·å…ƒç´ ä¹‹é—´çš„é‡è¦å…³ç³»ã€‚   æ–°çš„ 8B å’Œ 70B å‚æ•° Llama 3 æ¨¡å‹æ˜¯ Ll">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/carry121/pictures/raw/master//pictures/20240607235739.png">
<meta property="article:published_time" content="2024-06-07T14:24:09.000Z">
<meta property="article:modified_time" content="2024-06-07T15:57:53.776Z">
<meta property="article:author" content="CARRY">
<meta property="article:tag" content="å¤§æ¨¡å‹è¿ç”¨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/carry121/pictures/raw/master//pictures/20240607235739.png"><link rel="shortcut icon" href="/img/letter-c.png"><link rel="canonical" href="https://delahayecarry.github.io/2024/06/07/lmama-3-first/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ã€å¾®è°ƒå¤§æ¨¡å‹llamaã€‘ åŸºäºllama 3åˆ©ç”¨è‡ªå·±çš„æ•°æ®é›†å¾®è°ƒï¼ˆ1ï¼‰',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-07 23:57:53'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" type="text/css" href="./css/font.css"><link rel="stylesheet" type="text/css" href="../../../../css/font.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/qingxuan/"><i class="fa-fw fas fa-heart"></i><span> é’å®£</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gitee.com/carry121/pictures/raw/master//pictures/20240607235739.png')"><nav id="nav"><span id="blog-info"><a href="/" title="CARRY"><span class="site-name">CARRY</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/qingxuan/"><i class="fa-fw fas fa-heart"></i><span> é’å®£</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ã€å¾®è°ƒå¤§æ¨¡å‹llamaã€‘ åŸºäºllama 3åˆ©ç”¨è‡ªå·±çš„æ•°æ®é›†å¾®è°ƒï¼ˆ1ï¼‰</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-06-07T14:24:09.000Z" title="å‘è¡¨äº 2024-06-07 22:24:09">2024-06-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-06-07T15:57:53.776Z" title="æ›´æ–°äº 2024-06-07 23:57:53">2024-06-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BF%90%E7%94%A8/">å¤§æ¨¡å‹è¿ç”¨</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ã€å¾®è°ƒå¤§æ¨¡å‹llamaã€‘ åŸºäºllama 3åˆ©ç”¨è‡ªå·±çš„æ•°æ®é›†å¾®è°ƒï¼ˆ1ï¼‰"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Llama-3ä»‹ç»"><a href="#Llama-3ä»‹ç»" class="headerlink" title="Llama 3ä»‹ç»"></a>Llama 3ä»‹ç»</h1><p>æœ¬æ¬¡Llama-3çš„ä»‹ç»ä¸å‰ä¸¤ä¸ªç‰ˆæœ¬å·®ä¸å¤šï¼Œå¤§é‡çš„æµ‹è¯•æ•°æ®å’Œæ ¼å¼åŒ–ä»‹ç»ã€‚ä½†Metaç‰¹æ„æåˆ°Llama-3ä½¿ç”¨äº†æ©ç å’Œåˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›è¿™ä¸¤é¡¹æŠ€æœ¯ã€‚</p>
<p>ç›®å‰ï¼Œå¤§æ¨¡å‹é¢†åŸŸæœ€æµè¡Œçš„Transformeræ¶æ„çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è‡ªæˆ‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºå¤„ç†åºåˆ—æ•°æ®çš„æŠ€æœ¯ï¼Œå¯å¯¹è¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡ŒåŠ æƒèšåˆï¼Œä»¥æ•è·å…ƒç´ ä¹‹é—´çš„é‡è¦å…³ç³»ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/image-20240607223603516.png" alt="image-20240607223603516" style="zoom:67%;" />

<p>æ–°çš„ 8B å’Œ 70B å‚æ•° Llama 3 æ¨¡å‹æ˜¯ Llama 2 çš„é‡å¤§é£è·ƒï¼Œå¹¶ä¸ºè¿™äº›è§„æ¨¡çš„ LLM æ¨¡å‹å»ºç«‹äº†æ–°çš„æœ€å…ˆè¿›æŠ€æœ¯ã€‚ç”±äºé¢„è®­ç»ƒå’Œè®­ç»ƒåçš„æ”¹è¿›ï¼Œæ¨¡å‹æ˜¯å½“ä»Š 8B å’Œ 70B å‚æ•°è§„æ¨¡çš„æœ€ä½³æ¨¡å‹ã€‚æˆ‘è®­ç»ƒåç¨‹åºçš„æ”¹è¿›å¤§å¤§é™ä½äº†é”™è¯¯æ‹’ç»ç‡ï¼Œæ”¹å–„äº†ä¸€è‡´æ€§å¹¶å¢åŠ äº†æ¨¡å‹å“åº”çš„å¤šæ ·æ€§ã€‚æˆ‘ä»¬è¿˜çœ‹åˆ°äº†æ¨ç†ã€ä»£ç ç”Ÿæˆå’ŒæŒ‡ä»¤è·Ÿè¸ªç­‰åŠŸèƒ½çš„æå¤§æ”¹è¿›ï¼Œä½¿ Llama 3 æ›´åŠ æ˜“äºæ“æ§ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿ</h1><p><strong>Fine-tuningï¼ˆå¾®è°ƒï¼‰</strong>ï¼šé€šè¿‡ç‰¹å®šé¢†åŸŸæ•°æ®å¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œä»¥æå‡å…¶åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å¤§æ¨¡å‹å¾®è°ƒæ˜¯åˆ©ç”¨ç‰¹å®šé¢†åŸŸçš„æ•°æ®é›†å¯¹å·²é¢„è®­ç»ƒçš„å¤§æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥è®­ç»ƒçš„è¿‡ç¨‹ã€‚å®ƒæ—¨åœ¨ä¼˜åŒ–æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„æ€§èƒ½ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”å’Œå®Œæˆç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ</h2><h3 id="å®šåˆ¶åŒ–åŠŸèƒ½"><a href="#å®šåˆ¶åŒ–åŠŸèƒ½" class="headerlink" title="å®šåˆ¶åŒ–åŠŸèƒ½"></a>å®šåˆ¶åŒ–åŠŸèƒ½</h3><p>å¾®è°ƒçš„æ ¸å¿ƒåŸå› æ˜¯èµ‹äºˆå¤§æ¨¡å‹æ›´åŠ å®šåˆ¶åŒ–çš„åŠŸèƒ½ã€‚é€šç”¨å¤§æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†åœ¨ç‰¹å®šé¢†åŸŸå¯èƒ½è¡¨ç°ä¸ä½³ã€‚é€šè¿‡å¾®è°ƒï¼Œå¯ä»¥ä½¿æ¨¡å‹æ›´å¥½åœ°é€‚åº”ç‰¹å®šé¢†åŸŸçš„éœ€æ±‚å’Œç‰¹å¾ã€‚</p>
<h3 id="é¢†åŸŸçŸ¥è¯†å­¦ä¹ "><a href="#é¢†åŸŸçŸ¥è¯†å­¦ä¹ " class="headerlink" title="é¢†åŸŸçŸ¥è¯†å­¦ä¹ "></a>é¢†åŸŸçŸ¥è¯†å­¦ä¹ </h3><p>é€šè¿‡å¼•å…¥ç‰¹å®šé¢†åŸŸçš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒï¼Œå¤§æ¨¡å‹å¯ä»¥å­¦ä¹ è¯¥é¢†åŸŸçš„çŸ¥è¯†å’Œè¯­è¨€æ¨¡å¼ã€‚è¿™æœ‰åŠ©äºæ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šå–å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p>
<h3 id="å¾®è°ƒä¸è¶…å‚æ•°ä¼˜åŒ–"><a href="#å¾®è°ƒä¸è¶…å‚æ•°ä¼˜åŒ–" class="headerlink" title="å¾®è°ƒä¸è¶…å‚æ•°ä¼˜åŒ–"></a>å¾®è°ƒä¸è¶…å‚æ•°ä¼˜åŒ–</h3><p>å¾®è°ƒè¿‡ç¨‹ä¸­ï¼Œè¶…å‚æ•°çš„è°ƒæ•´è‡³å…³é‡è¦ã€‚è¶…å‚æ•°å¦‚å­¦ä¹ ç‡ã€æ‰¹æ¬¡å¤§å°å’Œè®­ç»ƒè½®æ¬¡ç­‰éœ€è¦æ ¹æ®ç‰¹å®šä»»åŠ¡å’Œæ•°æ®é›†è¿›è¡Œè°ƒæ•´ï¼Œä»¥ç¡®ä¿æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„æœ‰æ•ˆæ€§å’Œæ€§èƒ½ã€‚</p>
<h1 id="æ‰‹æŠŠæ‰‹å¾®è°ƒllama3-8Bæ¨¡å‹"><a href="#æ‰‹æŠŠæ‰‹å¾®è°ƒllama3-8Bæ¨¡å‹" class="headerlink" title="æ‰‹æŠŠæ‰‹å¾®è°ƒllama3-8Bæ¨¡å‹"></a>æ‰‹æŠŠæ‰‹å¾®è°ƒllama3-8Bæ¨¡å‹</h1><h2 id="ä½¿ç”¨çš„æ¡†æ¶å’Œå¹³å°ä»‹ç»"><a href="#ä½¿ç”¨çš„æ¡†æ¶å’Œå¹³å°ä»‹ç»" class="headerlink" title="ä½¿ç”¨çš„æ¡†æ¶å’Œå¹³å°ä»‹ç»"></a>ä½¿ç”¨çš„æ¡†æ¶å’Œå¹³å°ä»‹ç»</h2><p>æˆ‘å°†ä½¿ç”¨çš„æ˜¯<code>Unsloth</code>æ¡†æ¶æ¥è¿›è¡Œæ¨¡å‹çš„å¾®è°ƒï¼Œåˆ©ç”¨çš„å¹³å°æ˜¯å®˜æ–¹å»ºè®®çš„Colabå¹³å°ï¼ŒGPUæ˜¯T4ï¼Œæ˜¾å­˜æ˜¯22Gã€‚<a href="https://github.com/unslothai/unsloth">è·³è½¬åˆ°Unslothå¼€æºæ¡†æ¶</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/image-20240607224118153.png" alt="image-20240607224118153"></p>
<p>è¿™æ ·åŸºæœ¬æ¡ä»¶å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å³å°†å¼€å§‹å¾®è°ƒå±äºæˆ‘ä»¬çš„å¤§æ¨¡å‹ã€‚</p>
<h2 id="åˆ©ç”¨æ¡†æ¶åŠ è½½æ¨¡å‹"><a href="#åˆ©ç”¨æ¡†æ¶åŠ è½½æ¨¡å‹" class="headerlink" title="åˆ©ç”¨æ¡†æ¶åŠ è½½æ¨¡å‹"></a>åˆ©ç”¨æ¡†æ¶åŠ è½½æ¨¡å‹</h2><p>æˆ‘ä»¬æ¥åˆ°colabç•Œé¢åï¼Œå…ˆè¿æ¥åˆ°runtimeä¸­çš„T4 gpuï¼ˆå½“ç„¶ç®—åŠ›å•å…ƒè¦æ˜¯è¶³å¤Ÿçš„è¯å¯ä»¥ç›´æ¥ä¸ŠL4ï¼‰ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/image-20240607224638626.png" alt="image-20240607224638626"></p>
<p>è¿™æ ·æˆ‘ä»¬çš„GPUå°±é…ç½®å¥½äº†ï¼Œcolabè‡ªå¸¦python3ï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹åˆ°æ‹‰åº“ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šå®‰è£…çš„åŒ…æœ‰ä¸»è¦æœ‰<code>Unsloth, Xformers (Flash Attention)ï¼Œtorch2.21ï¼ˆcudaï¼‰ï¼Œnumpy</code>ç­‰ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%%capture</span><br><span class="line"><span class="comment"># Installs Unsloth, Xformers (Flash Attention) and all other packages!</span></span><br><span class="line">!pip install <span class="string">&quot;unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git&quot;</span></span><br><span class="line">!pip install --no-deps xformers <span class="string">&quot;trl&lt;0.9.0&quot;</span> peft accelerate bitsandbytes</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬å¼€å§‹åŠ è½½æ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unsloth <span class="keyword">import</span> FastLanguageModel</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">max_seq_length = <span class="number">2048</span> </span><br><span class="line">dtype = <span class="literal">None</span> </span><br><span class="line">load_in_4bit = <span class="literal">True</span> </span><br><span class="line"></span><br><span class="line">fourbit_models = [</span><br><span class="line">    <span class="string">&quot;unsloth/mistral-7b-v0.3-bnb-4bit&quot;</span>,      </span><br><span class="line">    <span class="string">&quot;unsloth/mistral-7b-instruct-v0.3-bnb-4bit&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unsloth/llama-3-8b-bnb-4bit&quot;</span>,           </span><br><span class="line">    <span class="string">&quot;unsloth/llama-3-8b-Instruct-bnb-4bit&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unsloth/llama-3-70b-bnb-4bit&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unsloth/Phi-3-mini-4k-instruct&quot;</span>,        </span><br><span class="line">    <span class="string">&quot;unsloth/Phi-3-medium-4k-instruct&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unsloth/mistral-7b-bnb-4bit&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unsloth/gemma-7b-bnb-4bit&quot;</span>,            </span><br><span class="line">] </span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">model, tokenizer = FastLanguageModel.from_pretrained(</span><br><span class="line">    model_name = <span class="string">&quot;unsloth/llama-3-8b-bnb-4bit&quot;</span>,</span><br><span class="line">    max_seq_length = max_seq_length,</span><br><span class="line">    dtype = dtype,</span><br><span class="line">    load_in_4bit = load_in_4bit,</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li><code>max_seq_length</code>ä»»é€‰å…¶ä¸€ï¼Œunslothåœ¨å†…éƒ¨è‡ªåŠ¨æ”¯æŒ RoPE æ‰©å±•ã€‚</li>
<li><code>dtype</code>çš„å‚æ•°å¯ä»¥ç»™åˆ°<code>None</code>ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ˜¯<code>None</code>å°±æ˜¯è‡ªåŠ¨æ£€æµ‹ã€‚<code>Float16</code>æ˜¯T4ï¼Œ<code>Bfloat16</code>æ˜¯å®‰åŸ¹æ¶æ„çš„gpuã€‚</li>
<li>ç†è®ºä¸Šå¯ä»¥å¾®è°ƒæ‰€æœ‰æ¨¡å‹ï¼Œæ›´å¤šæ¨¡å‹åœ¨<a href="https://huggingface.co/unsloth">https://huggingface.co/unsloth</a> è¿™é‡Œä¸‹è½½ã€‚</li>
</ol>
<p>æˆ‘ä»¬ç°åœ¨å¼€å§‹è¿è¡Œä¸€ä¸‹ï¼Œå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ğŸ¦¥ Unsloth: Will patch your computer to enable 2x faster free finetuning.</span><br><span class="line">config.json:â€‡100%</span><br><span class="line">â€‡1.20k/1.20kâ€‡[00:00&lt;00:00,â€‡28.6kB/s]</span><br><span class="line">==((====))==  Unsloth: Fast Llama patching release 2024.5</span><br><span class="line">   \\   /|    GPU: Tesla T4. Max memory: 14.748 GB. Platform = Linux.</span><br><span class="line">O^O/ \<span class="emphasis">_/ \    Pytorch: 2.3.0+cu121. CUDA = 7.5. CUDA Toolkit = 12.1.</span></span><br><span class="line"><span class="emphasis">\        /    Bfloat16 = FALSE. Xformers = 0.0.26.post1. FA = False.</span></span><br><span class="line"><span class="emphasis"> &quot;-<span class="strong">____</span>-&quot;     Free Apache license: http://github.com/unslothai/unsloth</span></span><br><span class="line"><span class="emphasis">model.safetensors:â€‡100%</span></span><br><span class="line"><span class="emphasis">â€‡5.70G/5.70Gâ€‡[00:53&lt;00:00,â€‡26.6MB/s]</span></span><br><span class="line"><span class="emphasis">generation_</span>config.json:â€‡100%</span><br><span class="line">â€‡172/172â€‡[00:00&lt;00:00,â€‡9.53kB/s]</span><br><span class="line">tokenizer<span class="emphasis">_config.json:â€‡100%</span></span><br><span class="line"><span class="emphasis">â€‡50.6k/50.6kâ€‡[00:00&lt;00:00,â€‡2.56MB/s]</span></span><br><span class="line"><span class="emphasis">tokenizer.json:â€‡100%</span></span><br><span class="line"><span class="emphasis">â€‡9.09M/9.09Mâ€‡[00:00&lt;00:00,â€‡57.4MB/s]</span></span><br><span class="line"><span class="emphasis">special_</span>tokens<span class="emphasis">_map.json:â€‡100%</span></span><br><span class="line"><span class="emphasis">â€‡464/464â€‡[00:00&lt;00:00,â€‡28.2kB/s]</span></span><br><span class="line"><span class="emphasis">Special tokens have been added in the vocabulary, make sure the associated word embeddings are fine-tuned or trained.</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬å°±åšå¥½äº†æ¨¡å‹çš„åŠ è½½å’Œè®­ç»ƒå¾®è°ƒçš„å‡†å¤‡ã€‚</p>
<h2 id="åˆ©ç”¨è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒ"><a href="#åˆ©ç”¨è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒ" class="headerlink" title="åˆ©ç”¨è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒ"></a>åˆ©ç”¨è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒ</h2><h3 id="å‡†å¤‡æ•°æ®é›†"><a href="#å‡†å¤‡æ•°æ®é›†" class="headerlink" title="å‡†å¤‡æ•°æ®é›†"></a>å‡†å¤‡æ•°æ®é›†</h3><p>æˆ‘å‡†å¤‡çš„æ•°æ®é›†ï¼Œæ¥è‡ªyahmaçš„alpaca-cleanedçš„æ•°æ®é›†ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ•°æ®çš„å±•ç¤ºã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Give three tips for staying healthy.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1. Eat a balanced and nutritious diet: Make sure your meals are inclusive of a variety of fruits and vegetables, lean protein, whole grains, and healthy fats. This helps to provide your body with the essential nutrients to function at its best and can help prevent chronic diseases.\n\n2. Engage in regular physical activity: Exercise is crucial for maintaining strong bones, muscles, and cardiovascular health. Aim for at least 150 minutes of moderate aerobic exercise or 75 minutes of vigorous exercise each week.\n\n3. Get enough sleep: Getting enough quality sleep is crucial for physical and mental well-being. It helps to regulate mood, improve cognitive function, and supports healthy growth and immune function. Aim for 7-9 hours of sleep each night.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;What are the three primary colors?&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The three primary colors are red, blue, and yellow. These colors are called primary because they cannot be created by mixing other colors and all other colors can be made by combining them in various proportions. In the additive color system, used for light, the primary colors are red, green, and blue (RGB).&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Describe the structure of an atom.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;An atom is the basic building block of all matter and is made up of three types of particles: protons, neutrons, and electrons. The structure of an atom can be described as a nucleus at the center surrounded by a cloud of electrons.\n\nThe nucleus of an atom is made up of protons and neutrons. Protons are positively charged particles and neutrons are neutral particles with no charge. Both of these particles are located in the nucleus of the atom, which is at the center of the atom and contains most of the atom&#x27;s mass.\n\nSurrounding the nucleus of the atom is a cloud of electrons. Electrons are negatively charged particles that are in constant motion around the nucleus. The electron cloud is divided into shells or orbitals, and each shell can hold a certain number of electrons. The number of electrons in the outermost shell, called the valence shell, determines the chemical properties of the atom. \n\nIn a neutral atom, the number of protons in the nucleus is equal to the number of electrons in the electron cloud, so the positive and negative charges balance out and the atom has no overall charge. The number of protons, also called the atomic number, determines what element the atom is.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;How can we reduce air pollution?&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;There are several ways to reduce air pollution, including:\n\n1. Reduce energy consumption: By conserving energy, we reduce the amount of pollution emitted from power plants. Some ways to achieve this include: using energy-efficient appliances and lighting, insulating homes, and shutting off lights and electronics when not in use.\n\n2. Use public transportation or carpool: Cars and trucks are major sources of pollution. By using public transportation, carpooling or biking, you can reduce the number of cars on the road, which in turn reduces emissions.\n\n3. Be responsible with waste: When waste is burned or decomposed, they can release harmful gases into the air. Dispose of hazardous waste correctly and recycle materials like plastics, paper, and glass when possible.\n\n4. Support clean energy sources: Renewable energy sources like solar and wind power generate little or no pollution. Support clean energy companies and projects, and consider installing renewable energy systems in your home.\n\n5. Drive efficiently: If you need to drive, make sure your vehicle is well maintained and drive efficiently by avoiding rapid acceleration and braking, and reducing idling.\n\n6. Be mindful of product choices: Some products and practices release more pollution than others. Choose products with eco-friendly packaging and try to minimize your use of aerosol sprays, which can release harmful chemicals into the air.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Pretend you are a project manager of a construction company. Describe a time when you had to make a difficult decision.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;I had to make a difficult decision when I was working as a project manager at a construction company. I was in charge of a project that needed to be completed by a certain date in order to meet the client\u2019s expectations. However, due to unexpected delays, we were not able to meet the deadline and so I had to make a difficult decision. I decided to extend the deadline, but I had to stretch the team\u2019s resources even further and increase the budget. Although it was a risky decision, I ultimately decided to go ahead with it to ensure that the project was completed on time and that the client\u2019s expectations were met. The project was eventually successfully completed and this was seen as a testament to my leadership and decision-making abilities.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Write a concise summary of the following:\n\&quot;Commodore 64 (commonly known as the C64 or CBM 64) was manufactured by Commodore Business Machine (CBM) in August 1982 with a starting price of $595. It was an 8-bit home computer with remarkable market success. Between 1983-1986, C64 sales amounted to about 17 million units sold, making them the best-selling single personal computer model of all time in 1983-1986. \n\nAdditionally, the Commodore 64 dominated the market with between 30% and 40% share and 2 million units sold per year, outselling the IBM PC clones, Apple Computers, and Atari computers. Adding to their success, Sam Tramiel (former Atari president), during an interview in 1989, said they were building 400,000 C64s a month for a couple of years. \&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The Commodore 64 was a highly successful 8-bit home computer manufactured by Commodore Business Machine (CBM) in 1982, with sales amounting to approximately 17 million units sold between 1983-1986. It dominated the market with between 30% and 40% share and outsold its competitors, including IBM PC clones, Apple Computers, and Atari computers. At its peak, CBM was building 400,000 C64s a month for a couple of years.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Explain why the following fraction is equivalent to 1/4&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4/16&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The fraction 4/16 is equivalent to 1/4 because both fractions represent the same value. A fraction can be simplified by dividing both the numerator and the denominator by a common factor. In this case, 4 is a common factor of both the numerator and the denominator of 4/16. When we divide both by 4, we get 4/4 = 1 and 16/4 = 4, so the simplified fraction is 1/4. Alternatively, we can think of this in terms of multiplication. For example, if we multiply the numerator and denominator of the fraction 1/4 by 4, we get (1x4)/(4x4), or 4/16. Since both fractions can be derived from the other through multiplication or division by the same number, they represent the same value and are equivalent.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Write a short story in third person narration about a protagonist who has to make an important career decision.&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Sophie sat at her desk, staring blankly at the computer screen. Her mind was racing as she weighed the options in front of her. She had been offered a promotion to a senior management position within her company, but it meant moving across the country and leaving her friends and family behind. At the same time, her dream job at a rival company had finally opened up, and she had been invited for an interview. \n\nThe thought of leaving her comfortable life behind, to take a chance on something new and uncertain, made Sophie feel anxious, but also excited. She had always been one to take risks, and it had paid off in the past. But now, with such a big decision to make, Sophie couldn&#x27;t help but feel overwhelmed.\n\nAfter much deliberation, Sophie made her choice. She packed her bags, said goodbye to her loved ones, and moved across the country for the new job. It was a difficult first few months, adjusting to a new city and a new company culture. But as time went by, Sophie realized that she had made the best decision for her career. The job was challenging, but also rewarding, and she was surrounded by passionate, driven colleagues who inspired her to grow and develop.\n\nIn the end, Sophie&#x27;s bold move paid off. She was thriving in her new role, and had made new friends and connections in her new city. Looking back, Sophie was grateful for the opportunity to take a risk and make a change, and was confident that she had made the right decision for her career.&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;instruction&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Evaluate this sentence for spelling and grammar mistakes&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;He finnished his meal and left the resturant&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;There are two spelling errors in the sentence. The corrected sentence should be: \&quot;He finished his meal and left the restaurant.\&quot;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ•°æ®é›†æ˜¯jsonæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡ä»¿å®ƒåˆ¶ä½œå±äºæˆ‘ä»¬è‡ªå·±çš„æ•°æ®é›†ï¼Œæ¥æ›´å¥½çš„æ„å»ºæˆ‘ä»¬éœ€è¦çš„çŸ¥è¯†åº“ç³»ç»Ÿã€‚</p>
<p>è€ƒè™‘åˆ°æˆ‘ä»¬é…ç½®çš„å¹³å°å’Œæ•°æ®é›†å¤§å°ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ–°ä¸€ä¸‹llama3çš„1%-10%çš„å‚æ•°å³å¯ã€‚è¿™å–å†³äºæ•°æ®å¤§å°ï¼Œå¦‚æœæ•°æ®é›†å¤§çš„è¯éœ€è¦æ›´æ–°çš„å‚æ•°æ›´å¤šã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">model = FastLanguageModel.get_peft_model(</span><br><span class="line">    model,</span><br><span class="line">    r = <span class="number">16</span>, <span class="comment"># Choose any number &gt; 0 ! Suggested 8, 16, 32, 64, 128</span></span><br><span class="line">    target_modules = [<span class="string">&quot;q_proj&quot;</span>, <span class="string">&quot;k_proj&quot;</span>, <span class="string">&quot;v_proj&quot;</span>, <span class="string">&quot;o_proj&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;gate_proj&quot;</span>, <span class="string">&quot;up_proj&quot;</span>, <span class="string">&quot;down_proj&quot;</span>,],</span><br><span class="line">    lora_alpha = <span class="number">16</span>,</span><br><span class="line">    lora_dropout = <span class="number">0</span>, <span class="comment"># Supports any, but = 0 is optimized</span></span><br><span class="line">    bias = <span class="string">&quot;none&quot;</span>,    <span class="comment"># Supports any, but = &quot;none&quot; is optimized</span></span><br><span class="line">    <span class="comment"># [NEW] &quot;unsloth&quot; uses 30% less VRAM, fits 2x larger batch sizes!</span></span><br><span class="line">    use_gradient_checkpointing = <span class="string">&quot;unsloth&quot;</span>, <span class="comment"># True or &quot;unsloth&quot; for very long context</span></span><br><span class="line">    random_state = <span class="number">3407</span>,</span><br><span class="line">    use_rslora = <span class="literal">False</span>,  <span class="comment"># We support rank stabilized LoRA</span></span><br><span class="line">    loftq_config = <span class="literal">None</span>, <span class="comment"># And LoftQ</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li><p><code>r = 16</code>å¿…é¡»å¡«å†™å¤§äº0çš„æ•´æ•°ï¼Œæœ€å¥½æ˜¯2çš„næ¬¡æ–¹ã€‚</p>
</li>
<li><p><code>lora_dropout</code>å®ƒçš„å‚æ•°è¡¨ç¤ºä»¥è¿™ä¸ª<code>dropout</code>çš„æ¦‚ç‡æ¥éšæœºé€‰æ‹©å¿½ç•¥çš„ç¥ç»å…ƒæ¥é¿å…è¿‡æ‹Ÿåˆï¼Œæœ€å¥½å†™0ã€‚</p>
<p>å…·ä½“LORAåŸç†è¯·çœ‹<a href="https://zhuanlan.zhihu.com/p/664664239">è¿™ç¯‡æ–‡ç« </a>ï¼Œæˆ‘è¿™é‡Œä¸å±•å¼€äº†ã€‚</p>
</li>
</ol>
<h3 id="é¢„å¤„ç†æ•°æ®"><a href="#é¢„å¤„ç†æ•°æ®" class="headerlink" title="é¢„å¤„ç†æ•°æ®"></a>é¢„å¤„ç†æ•°æ®</h3><p>åšä¸€ä¸ªæ•°æ®çš„åˆ†å‰²ï¼Œä¿è¯èƒ½å¤Ÿå°†æ•°æ®é›†ä¸­çš„æ¯ä¸ªç¤ºä¾‹æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·æ‰èƒ½å°†è¿™ä¸ªæ•°æ®é›†ç”¨äºè‡ªç„¶è¯­è¨€ç”Ÿæˆæ¨¡å‹ï¼Œä¾‹å¦‚llama3ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">alpaca_prompt = </span><br><span class="line"></span><br><span class="line">EOS_TOKEN = tokenizer.eos_token <span class="comment"># Must add EOS_TOKEN</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">formatting_prompts_func</span>(<span class="params">examples</span>):</span><br><span class="line">    instructions = examples[<span class="string">&quot;instruction&quot;</span>]</span><br><span class="line">    inputs       = examples[<span class="string">&quot;input&quot;</span>]</span><br><span class="line">    outputs      = examples[<span class="string">&quot;output&quot;</span>]</span><br><span class="line">    texts = []</span><br><span class="line">    <span class="keyword">for</span> instruction, <span class="built_in">input</span>, output <span class="keyword">in</span> <span class="built_in">zip</span>(instructions, inputs, outputs):</span><br><span class="line">        <span class="comment"># Must add EOS_TOKEN, otherwise your generation will go on forever!</span></span><br><span class="line">        text = alpaca_prompt.<span class="built_in">format</span>(instruction, <span class="built_in">input</span>, output) + EOS_TOKEN</span><br><span class="line">        texts.append(text)</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="string">&quot;text&quot;</span> : texts, &#125;</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¤„ç†å®Œç«‹åˆ»åŠ è½½ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset</span><br><span class="line">dataset = load_dataset(<span class="string">&quot;yahma/alpaca-cleaned&quot;</span>, split = <span class="string">&quot;train&quot;</span>)</span><br><span class="line">dataset = dataset.<span class="built_in">map</span>(formatting_prompts_func, batched = <span class="literal">True</span>,)</span><br></pre></td></tr></table></figure>

<p>æ•°æ®é›†å‡†å¤‡å®Œæ¯•åæˆ‘ä»¬ç›´æ¥å¼€å§‹å¾®è°ƒã€‚</p>
<h2 id="å¾®è°ƒå¼€å§‹"><a href="#å¾®è°ƒå¼€å§‹" class="headerlink" title="å¾®è°ƒå¼€å§‹"></a>å¾®è°ƒå¼€å§‹</h2><p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è®¾å®šå¥½é¢„è®­ç»ƒæ¨¡å‹å’Œé»˜è®¤è¶…å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> trl <span class="keyword">import</span> SFTTrainer</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> TrainingArguments</span><br><span class="line"><span class="keyword">from</span> unsloth <span class="keyword">import</span> is_bfloat16_supported</span><br><span class="line"></span><br><span class="line">trainer = SFTTrainer(</span><br><span class="line">    model = model,</span><br><span class="line">    tokenizer = tokenizer,</span><br><span class="line">    train_dataset = dataset,</span><br><span class="line">    dataset_text_field = <span class="string">&quot;text&quot;</span>,</span><br><span class="line">    max_seq_length = max_seq_length,</span><br><span class="line">    dataset_num_proc = <span class="number">2</span>,</span><br><span class="line">    packing = <span class="literal">False</span>, <span class="comment"># Can make training 5x faster for short sequences.</span></span><br><span class="line">    args = TrainingArguments(</span><br><span class="line">        per_device_train_batch_size = <span class="number">2</span>,</span><br><span class="line">        gradient_accumulation_steps = <span class="number">4</span>,</span><br><span class="line">        warmup_steps = <span class="number">5</span>,</span><br><span class="line">        max_steps = <span class="number">60</span>,</span><br><span class="line">        learning_rate = <span class="number">2e-4</span>,</span><br><span class="line">        fp16 = <span class="keyword">not</span> is_bfloat16_supported(),</span><br><span class="line">        bf16 = is_bfloat16_supported(),</span><br><span class="line">        logging_steps = <span class="number">1</span>,</span><br><span class="line">        optim = <span class="string">&quot;adamw_8bit&quot;</span>,</span><br><span class="line">        weight_decay = <span class="number">0.01</span>,</span><br><span class="line">        lr_scheduler_type = <span class="string">&quot;linear&quot;</span>,</span><br><span class="line">        seed = <span class="number">3407</span>,</span><br><span class="line">        output_dir = <span class="string">&quot;outputs&quot;</span>,</span><br><span class="line">    ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>åŸºæœ¬è¶…å‚æ•°æˆ‘å°±ä¸ä»‹ç»äº†ï¼ŒåŸºæœ¬æŒ‰ç…§é»˜è®¤ã€‚</p>
<p>å¾—åˆ°è¾“å‡ºç»“æœ</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/lib/python3.10/dist-packages/multiprocess/popen<span class="emphasis">_fork.py:66: RuntimeWarning: os.fork() was called. os.fork() is incompatible with multithreaded code, and JAX is multithreaded, so this will likely lead to a deadlock.</span></span><br><span class="line"><span class="emphasis">  self.pid = os.fork()</span></span><br><span class="line"><span class="emphasis">Mapâ€‡(num_</span>proc=2):â€‡100%</span><br><span class="line">â€‡51760/51760â€‡[00:53&lt;00:00,â€‡1987.81â€‡examples/s]</span><br><span class="line">max<span class="emphasis">_steps is given, it will override any value given in num_</span>train<span class="emphasis">_epochs</span></span><br></pre></td></tr></table></figure>

<p>æ‰“å°ä¸€ä¸‹gpuä¿¡æ¯ï¼Œç¡®ä¿gpué…ç½®æ­£ç¡®ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpu_stats = torch.cuda.get_device_properties(<span class="number">0</span>)</span><br><span class="line">start_gpu_memory = <span class="built_in">round</span>(torch.cuda.max_memory_reserved() / <span class="number">1024</span> / <span class="number">1024</span> / <span class="number">1024</span>, <span class="number">3</span>)</span><br><span class="line">max_memory = <span class="built_in">round</span>(gpu_stats.total_memory / <span class="number">1024</span> / <span class="number">1024</span> / <span class="number">1024</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;GPU = <span class="subst">&#123;gpu_stats.name&#125;</span>. Max memory = <span class="subst">&#123;max_memory&#125;</span> GB.&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;start_gpu_memory&#125;</span> GB of memory reserved.&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GPU = Tesla T4. Max memory = 14.748 GB.</span><br><span class="line">5.594 GB of memory reserved.</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜æˆ‘çš„gpué…ç½®æ­£ç¡®ã€‚</p>
<p>é‚£ä¹ˆç›´æ¥å¼€å§‹è®­ç»ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trainer_stats = trainer.train()</span><br></pre></td></tr></table></figure>

<p>ç»è¿‡å‡ åˆ†é’Ÿåï¼Œæˆ‘å¾—åˆ°è®­ç»ƒçš„è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">==((====))==  Unsloth - 2x faster free finetuning | Num GPUs = 1</span><br><span class="line">   \\   /|    Num examples = 51,760 | Num Epochs = 1</span><br><span class="line">O^O/ \_/ \    Batch size per device = 2 | Gradient Accumulation steps = 4</span><br><span class="line">\        /    Total batch size = 8 | Total steps = 60</span><br><span class="line"> &quot;-____-&quot;     Number of trainable parameters = 41,943,040</span><br><span class="line"> [22/60 02:20 &lt; 04:26, 0.14 it/s, Epoch 0.00/1]</span><br><span class="line">Step	Training Loss</span><br><span class="line">1	1.814500</span><br><span class="line">2	2.285700</span><br><span class="line">3	1.687500</span><br><span class="line">4	1.941200</span><br><span class="line">5	1.638300</span><br><span class="line">6	1.596200</span><br><span class="line">7	1.187800</span><br><span class="line">8	1.252300</span><br><span class="line">9	1.100100</span><br><span class="line">10	1.159300</span><br><span class="line">11	0.960700</span><br><span class="line">12	1.000500</span><br><span class="line">13	0.932200</span><br><span class="line">14	1.056200</span><br><span class="line">15	0.906500</span><br><span class="line">16	0.909100</span><br><span class="line">17	1.021500</span><br><span class="line">18	1.281200</span><br><span class="line">19	1.011400</span><br><span class="line">20	0.898900</span><br><span class="line"> [60/60 07:18, Epoch 0/1]</span><br><span class="line">Step	Training Loss</span><br><span class="line">1	1.814500</span><br><span class="line">2	2.285700</span><br><span class="line">3	1.687500</span><br><span class="line">4	1.941200</span><br><span class="line">5	1.638300</span><br><span class="line">6	1.596200</span><br><span class="line">7	1.187800</span><br><span class="line">8	1.252300</span><br><span class="line">9	1.100100</span><br><span class="line">10	1.159300</span><br><span class="line">11	0.960700</span><br><span class="line">12	1.000500</span><br><span class="line">13	0.932200</span><br><span class="line">14	1.056200</span><br><span class="line">15	0.906500</span><br><span class="line">16	0.909100</span><br><span class="line">17	1.021500</span><br><span class="line">18	1.281200</span><br><span class="line">19	1.011400</span><br><span class="line">20	0.898900</span><br><span class="line">21	0.947400</span><br><span class="line">22	1.014800</span><br><span class="line">23	0.883300</span><br><span class="line">24	0.993200</span><br><span class="line">25	1.065700</span><br><span class="line">26	1.009700</span><br><span class="line">27	1.039500</span><br><span class="line">28	0.872200</span><br><span class="line">29	0.840000</span><br><span class="line">30	0.901700</span><br><span class="line">31	0.867100</span><br><span class="line">32	0.864300</span><br><span class="line">33	0.985000</span><br><span class="line">34	0.859700</span><br><span class="line">35	0.962900</span><br><span class="line">36	0.859900</span><br><span class="line">37	0.885800</span><br><span class="line">38	0.766800</span><br><span class="line">39	1.083200</span><br><span class="line">40	1.159200</span><br><span class="line">41	0.903300</span><br><span class="line">42	0.985700</span><br><span class="line">43	0.960600</span><br><span class="line">44	0.899200</span><br><span class="line">45	0.921800</span><br><span class="line">46	0.998700</span><br><span class="line">47	0.865800</span><br><span class="line">48	1.215900</span><br><span class="line">49	0.910900</span><br><span class="line">50	1.046900</span><br><span class="line">51	1.019400</span><br><span class="line">52	0.922700</span><br><span class="line">53	1.002500</span><br><span class="line">54	1.168000</span><br><span class="line">55	0.797800</span><br><span class="line">56	1.026400</span><br><span class="line">57	0.884300</span><br><span class="line">58	0.826800</span><br><span class="line">59	0.861400</span><br><span class="line">60	0.904500</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°80ä¸ªå‘¨æœŸåï¼Œlosså·²ç»æ”¶æ•›äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸºæœ¬çš„è®­ç»ƒå°±å®Œæˆäº†ã€‚</p>
<p>æˆ‘ä»¬æ‰“å°ä¸€ä¸‹æ˜¾å­˜æ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">452.6049 seconds used for training.</span><br><span class="line">7.54 minutes used for training.</span><br><span class="line">Peak reserved memory = 7.535 GB.</span><br><span class="line">Peak reserved memory for training = 1.941 GB.</span><br><span class="line">Peak reserved memory % of max memory = 51.092 %.</span><br><span class="line">Peak reserved memory for training % of max memory = 13.161 %.</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¼€å§‹æµ‹è¯•ä¸€ä¸‹æ¨¡å‹ã€‚</p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨æç¤ºè¯æ˜¯è²åˆ©æ³¢æ•°åˆ—çš„å‰å‡ ä½ï¼Œæˆ‘æƒ³è®©æˆ‘çš„æ¨¡å‹ç»­å†™ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/image-20240607233712185.png" alt="image-20240607233712185"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># alpaca_prompt = Copied from above</span></span><br><span class="line">FastLanguageModel.for_inference(model) <span class="comment"># Enable native 2x faster inference</span></span><br><span class="line">inputs = tokenizer(</span><br><span class="line">[</span><br><span class="line">    alpaca_prompt.<span class="built_in">format</span>(</span><br><span class="line">        <span class="string">&quot;Continue the fibonnaci sequence.&quot;</span>, <span class="comment"># instruction</span></span><br><span class="line">        <span class="string">&quot;1, 1, 2, 3, 5, 8&quot;</span>, <span class="comment"># input</span></span><br><span class="line">        <span class="string">&quot;&quot;</span>, <span class="comment"># output - leave this blank for generation!</span></span><br><span class="line">    )</span><br><span class="line">], return_tensors = <span class="string">&quot;pt&quot;</span>).to(<span class="string">&quot;cuda&quot;</span>)</span><br><span class="line"></span><br><span class="line">outputs = model.generate(**inputs, max_new_tokens = <span class="number">64</span>, use_cache = <span class="literal">True</span>)</span><br><span class="line">tokenizer.batch_decode(outputs)</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong>ä¸€å®šè¦æŒ‰ç…§æ•°æ®é›†çš„æ ¼å¼æ¥è¾“å…¥!!!</p>
<p>æˆ‘å¾—åˆ°äº†å®ƒçš„å›å¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Setting `pad_token_id` to `eos_token_id`:128001 for open-end generation.</span><br><span class="line">[&#x27;&lt;|begin_of_text|&gt;Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.\n\n### Instruction:\nContinue the fibonnaci sequence.\n\n### Input:\n1, 1, 2, 3, 5, 8\n\n### Response:\n13, 21, 34, 55, 89, 144, 233, 377, 610, 987&lt;|end_of_text|&gt;&#x27;]</span><br></pre></td></tr></table></figure>

<p><code>Response:\n13, 21, 34, 55, 89, 144, 233, 377, 610, 987&lt;|end_of_text|&gt;&#39;]</code></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å¾—åˆ°äº†ç­”æ¡ˆï¼Œç¡®å®æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>å…·ä½“æµ‹è¯•å’Œæ–°æ•°æ®é›†çš„å¾®è°ƒæˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä»‹ç»ã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://Delahayecarry.github.io">CARRY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://delahayecarry.github.io/2024/06/07/lmama-3-first/">https://delahayecarry.github.io/2024/06/07/lmama-3-first/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://Delahayecarry.github.io" target="_blank">CARRY</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BF%90%E7%94%A8/">å¤§æ¨¡å‹è¿ç”¨</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/carry121/pictures/raw/master//pictures/20240607235739.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/06/08/llama3-2-dataprep/" title="ã€Llama3æ•°æ®é›†å‡†å¤‡ã€‘é€‚ç”¨äºllama3ä¸ªäººæ•°æ®é›†çš„åˆ¶ä½œ"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240608125209.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€Llama3æ•°æ®é›†å‡†å¤‡ã€‘é€‚ç”¨äºllama3ä¸ªäººæ•°æ®é›†çš„åˆ¶ä½œ</div></div></a></div><div class="next-post pull-right"><a href="/2024/05/26/rnn-lstm/" title="ã€RNN ï¼† LTSMã€‘"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240526215503.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ã€RNN ï¼† LTSMã€‘</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2024/07/20/Graphrag-2/" title="ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240720170332.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-20</div><div class="title">ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–</div></div></a></div><div><a href="/2024/09/23/NEw/" title="åˆ©ç”¨Promptå®ç°æ¨ç†é“¾"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-23</div><div class="title">åˆ©ç”¨Promptå®ç°æ¨ç†é“¾</div></div></a></div><div><a href="/2024/07/18/graphrag-1/" title="ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240804163439.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-18</div><div class="title">ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ</div></div></a></div><div><a href="/2024/06/08/llama3-2-dataprep/" title="ã€Llama3æ•°æ®é›†å‡†å¤‡ã€‘é€‚ç”¨äºllama3ä¸ªäººæ•°æ®é›†çš„åˆ¶ä½œ"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240608125209.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-08</div><div class="title">ã€Llama3æ•°æ®é›†å‡†å¤‡ã€‘é€‚ç”¨äºllama3ä¸ªäººæ•°æ®é›†çš„åˆ¶ä½œ</div></div></a></div><div><a href="/2024/05/11/local-llm-in-autogen/" title="ã€Llmba 3ç¦»çº¿éƒ¨ç½²+lm studioã€‘å®ç°Autogenç¦»çº¿éƒ¨ç½²"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240511104831.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-11</div><div class="title">ã€Llmba 3ç¦»çº¿éƒ¨ç½²+lm studioã€‘å®ç°Autogenç¦»çº¿éƒ¨ç½²</div></div></a></div><div><a href="/2024/09/27/visual-graphRag/" title="å¯è§†åŒ–GraphRagèŠ‚ç‚¹å’Œç¤¾åŒº"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-27</div><div class="title">å¯è§†åŒ–GraphRagèŠ‚ç‚¹å’Œç¤¾åŒº</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CARRY</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><a id="card-info-btn" href="https://github.com/Delahayecarry"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Delahayecarry" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:Delahayecarry@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢!ç°åœ¨åˆ†ç±»æ˜¯æŒ‰ç…§æŠ€æœ¯æ ˆåˆ†ç±»ï¼Œæ–¹ä¾¿äº’ç›¸å­¦ä¹ ï¼</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Llama-3%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">Llama 3ä»‹ç»</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E8%B0%83%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯å¾®è°ƒï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%BE%AE%E8%B0%83%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆè¦å¾®è°ƒï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6%E5%8C%96%E5%8A%9F%E8%83%BD"><span class="toc-number">2.2.1.</span> <span class="toc-text">å®šåˆ¶åŒ–åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E7%9F%A5%E8%AF%86%E5%AD%A6%E4%B9%A0"><span class="toc-number">2.2.2.</span> <span class="toc-text">é¢†åŸŸçŸ¥è¯†å­¦ä¹ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E8%B0%83%E4%B8%8E%E8%B6%85%E5%8F%82%E6%95%B0%E4%BC%98%E5%8C%96"><span class="toc-number">2.2.3.</span> <span class="toc-text">å¾®è°ƒä¸è¶…å‚æ•°ä¼˜åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%8B%E6%8A%8A%E6%89%8B%E5%BE%AE%E8%B0%83llama3-8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">æ‰‹æŠŠæ‰‹å¾®è°ƒllama3-8Bæ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%9A%84%E6%A1%86%E6%9E%B6%E5%92%8C%E5%B9%B3%E5%8F%B0%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text">ä½¿ç”¨çš„æ¡†æ¶å’Œå¹³å°ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%A1%86%E6%9E%B6%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">åˆ©ç”¨æ¡†æ¶åŠ è½½æ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E8%87%AA%E5%B7%B1%E5%87%86%E5%A4%87%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%E8%BF%9B%E8%A1%8C%E5%BE%AE%E8%B0%83"><span class="toc-number">3.3.</span> <span class="toc-text">åˆ©ç”¨è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†è¿›è¡Œå¾®è°ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-number">3.3.1.</span> <span class="toc-text">å‡†å¤‡æ•°æ®é›†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.2.</span> <span class="toc-text">é¢„å¤„ç†æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E8%B0%83%E5%BC%80%E5%A7%8B"><span class="toc-number">3.4.</span> <span class="toc-text">å¾®è°ƒå¼€å§‹</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/27/visual-graphRag/" title="å¯è§†åŒ–GraphRagèŠ‚ç‚¹å’Œç¤¾åŒº">å¯è§†åŒ–GraphRagèŠ‚ç‚¹å’Œç¤¾åŒº</a><time datetime="2024-09-27T09:28:53.000Z" title="å‘è¡¨äº 2024-09-27 17:28:53">2024-09-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/23/NEw/" title="åˆ©ç”¨Promptå®ç°æ¨ç†é“¾">åˆ©ç”¨Promptå®ç°æ¨ç†é“¾</a><time datetime="2024-09-23T13:26:57.000Z" title="å‘è¡¨äº 2024-09-23 21:26:57">2024-09-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/23/ominiparse/" title="ã€MAGIC-PDFã€‘OCRæ‰«æå®ç°PDF2Md">ã€MAGIC-PDFã€‘OCRæ‰«æå®ç°PDF2Md</a><time datetime="2024-08-23T08:24:09.000Z" title="å‘è¡¨äº 2024-08-23 16:24:09">2024-08-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/20/Graphrag-2/" title="ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240720170332.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–"/></a><div class="content"><a class="title" href="/2024/07/20/Graphrag-2/" title="ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–">ã€Graphragã€‘GRæ¡†æ¶æ£€ç´¢å’ŒwebuiåŒ–</a><time datetime="2024-07-20T07:54:09.000Z" title="å‘è¡¨äº 2024-07-20 15:54:09">2024-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/18/graphrag-1/" title="ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://gitee.com/carry121/pictures/raw/master//pictures/20240804163439.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ"/></a><div class="content"><a class="title" href="/2024/07/18/graphrag-1/" title="ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ">ã€GraphRagã€‘ä»¥çŸ¥è¯†å›¾è°±çš„æ–¹å¼å»ºç«‹çŸ¥è¯†åº“ç³»ç»Ÿ</a><time datetime="2024-07-18T14:32:07.000Z" title="å‘è¡¨äº 2024-07-18 22:32:07">2024-07-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/carry121/pictures/raw/master//pictures/20240607235739.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By CARRY</div><div class="framework-info"><span>æ¡†æ¶ </span><a href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.delahayecarry.cn/',
      region: 'AWS / N. Virginia (us-east-1)',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.delahayecarry.cn/',
      region: 'AWS / N. Virginia (us-east-1)',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://p4.music.126.net/eAG-_g4t7mmIdZQO1PsXBA==/109951164483215843.jpg);"> <a class="categoryBar-list-link" href="categories/å¤§æ¨¡å‹è¿ç”¨/">å¤§æ¨¡å‹è¿ç”¨</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr">å¤§æ¨¡å‹è¿ç”¨</span></li><li class="categoryBar-list-item" style="background:url(https://p3.music.126.net/7f3bD3eEmz0KjRLuqsLV9g==/109951165718240862.jpg);"> <a class="categoryBar-list-link" href="categories/æ·±åº¦å­¦ä¹ /">æ·±åº¦å­¦ä¹ </a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">å­¦ä¹ </span></li><li class="categoryBar-list-item" style="background:url(https://p3.music.126.net/NSSWXe7_mlbKpaM9sg5A6w==/109951168785989827.jpg);"> <a class="categoryBar-list-link" href="categories/æœºå™¨å­¦ä¹ ç®—æ³•/">æœºå™¨å­¦ä¹ ç®—æ³•</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">çˆ¬è™«</span></li><li class="categoryBar-list-item" style="background:url(https://p4.music.126.net/mAUiNEfKqPe230qptWd6uA==/109951168988739342.jpg);"> <a class="categoryBar-list-link" href="categories/å­¦ä¹ /">å­¦ä¹ </a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">ä¸ªäººæ—¥è®°</span></li><li class="categoryBar-list-item" style="background:url(https://p3.music.126.net/EJHZAe8C3yYCSgba2oqnjw==/109951169445772816.jpg);"> <a class="categoryBar-list-link" href="categories/çˆ¬è™«/">çˆ¬è™«</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">ç•™ç»™é’å®£</span></li></ul></div></div>';
      console.log('å·²æŒ‚è½½butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><!-- hexo injector body_end end --></body></html>